from contextlib import ExitStack
import xml.etree.ElementTree as etree  # noqa: N813 -- for lxml compatibility

from app.converters import ConversionInput, SigmetConverter
from app.media_types import MediaTypes
import pendulum
import pytest
from tests.conftest import compare_xml
import time_machine


class TestSigmetConverter:

    @pytest.mark.asyncio
    async def test_convert_airmet_domestic(self):
        converter = SigmetConverter()
        with ExitStack() as stack:
            stack.enter_context(time_machine.travel(pendulum.parse('2020-10-05T13:55:02Z')))
            results = await converter.convert([ConversionInput(TAC_AIR_US, MediaTypes.TEXT_PLAIN)])
        assert len(results) > 0
        for result in results:
            assert len(result.data) > 0
            xml_tree = etree.fromstring(XML_AIR_US)
            result_tree = etree.fromstring(result.data)
            assert compare_xml(xml_tree, result_tree)

    @pytest.mark.asyncio
    async def test_convert_airmet_intl(self):
        converter = SigmetConverter()
        with ExitStack() as stack:
            stack.enter_context(time_machine.travel(pendulum.parse('2020-09-11T15:51:46Z')))
            results = await converter.convert([ConversionInput(TAC_AIR_INTL, MediaTypes.TEXT_PLAIN)])
        assert len(results) > 0
        for result in results:
            assert len(result.data) > 0
            xml_tree = etree.fromstring(XML_AIR_INTL)
            result_tree = etree.fromstring(result.data)
            assert compare_xml(xml_tree, result_tree)

    @pytest.mark.asyncio
    async def test_convert_sigmet_domestic(self):
        converter = SigmetConverter()
        with ExitStack() as stack:
            stack.enter_context(time_machine.travel(pendulum.parse('2020-09-09T11:15:32Z')))
            results = await converter.convert([ConversionInput(TAC_SIG_US, MediaTypes.TEXT_PLAIN)])
        assert len(results) > 0
        for result in results:
            assert len(result.data) > 0
            xml_tree = etree.fromstring(XML_SIG_US)
            result_tree = etree.fromstring(result.data)
            assert compare_xml(xml_tree, result_tree)

    @pytest.mark.asyncio
    async def test_convert_sigmet_no_header(self):
        converter = SigmetConverter()
        with ExitStack() as stack:
            stack.enter_context(time_machine.travel(pendulum.parse('2020-09-09T11:15:32Z')))
            results = await converter.convert([ConversionInput(TAC_SIG_US_NO_HEADER, MediaTypes.TEXT_PLAIN)])
        assert len(results) > 0
        for result in results:
            assert len(result.data) > 0
            xml_tree = etree.fromstring(XML_SIG_US_NO_HEADER)
            result_tree = etree.fromstring(result.data)
            assert compare_xml(xml_tree, result_tree)

    @pytest.mark.asyncio
    async def test_convert_sigmet_intl(self):
        converter = SigmetConverter()
        with ExitStack() as stack:
            stack.enter_context(time_machine.travel(pendulum.parse('2020-09-11T15:09:21Z')))
            results = await converter.convert([ConversionInput(TAC_SIG_INTL, MediaTypes.TEXT_PLAIN)])
        assert len(results) > 0
        for result in results:
            assert len(result.data) > 0
            xml_tree = etree.fromstring(XML_SIG_INTL)
            result_tree = etree.fromstring(result.data)
            assert compare_xml(xml_tree, result_tree)


# ~/airsigmet-converter_code_v3.0/test/xmlTestingDir/usInputData/2017091014_irma_remark.txt
TAC_SIG_US = b'''\
\r\r\n
075\r\r\n
WSUS31 KKCI 101455\r\r\n
SIGE  \r\r\n
MKCE WST 101455\r\r\n
CONVECTIVE SIGMET 36E\r\r\n
VALID UNTIL 1655Z\r\r\n
FL AND CSTL WTRS\r\r\n
FROM 70E PBI-160SE MIA-90WSW EYW-100SW SRQ-70E PBI\r\r\n
AREA SEV EMBD TS MOV FROM 18005KT. TOPS ABV FL450.\r\r\n
TORNADOES...WIND GUSTS TO 115KT POSS. TS ASSOCD WITH HURCN IRMA.\r\r\n
\r\r\n
'''  # noqa: E501

# NGITWS-986 Converter fails without 3-digit header
TAC_SIG_US_NO_HEADER = b'''\
WSCN02 CWAO 231739\r\r\n
CZEG SIGMET A4 VALID 231735/232135 CWEG-\r\r\n
CZEG EDMONTON FIR SEV ICG (FZRA) FCST WTN 30 NM OF LINE N6526 W10421 - N6429\r\r\n
W09438 SFC/FL020 MOV ESE 15KT NC=\r\r\n
'''

# ~/airsigmet-converter_code_v3.0/test/xmlTestingDir/inputData/2016031517_WAIY32_LIIB_airmet.txt
TAC_AIR_INTL = b'''\
\r\r\n
263\r\r\n
WAIY32 LIIB 151736\r\r\n
LIRR AIRMET 18 VALID 151800/152200 LIIB- LIRR ROMA FIR MT OBSC FCST\r\r\n
WI N4249 E01303 - N4329 E01318 - N4336 E01143 - N4028 E01440 - N3718\r\r\n
E01448 - N3824 E01646 - N4110 E01504 - N4127 E01418 - N4249 E01303\r\r\n
STNR NC=\r\r\n
\r\r\n
'''  # noqa: E501

XML_AIR_INTL = b'''\
<?xml version="1.0" encoding="UTF-8"?>\n<iwxxm:AIRMET xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:aixm="http://www.aixm.aero/schema/5.1.1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:gml="http://www.opengis.net/gml/3.2" xmlns:iwxxm="http://icao.int/iwxxm/3.0" xsi:schemaLocation="http://icao.int/iwxxm/3.0 http://schemas.wmo.int/iwxxm/3.0/iwxxm.xsd" gml:id="uuid.fb62ee73-5b40-3d2a-981b-6ce965de8b3c" reportStatus="NORMAL" permissibleUsage="OPERATIONAL" translatedBulletinID="WAIY32LIRR151736" translatedBulletinReceptionTime="2020-09-11T15:51:46Z" translationTime="2020-09-11T15:51:46Z">\n  <iwxxm:issueTime>\n    <gml:TimeInstant gml:id="uuid.1f70ae7e-0322-30c7-8f8a-fb3f5e39ce51">\n      <gml:timePosition>2020-09-15T17:36:00Z</gml:timePosition>\n    </gml:TimeInstant>\n  </iwxxm:issueTime>\n  <iwxxm:issuingAirTrafficServicesUnit>\n    <aixm:Unit gml:id="uuid.c4c151ed-50ef-39eb-8d36-e626dcacf7f4">\n      <aixm:timeSlice>\n        <aixm:UnitTimeSlice gml:id="uuid.ceccc355-8d2e-3a7a-9b1a-ddf350980e8d">\n          <gml:validTime/>\n          <aixm:interpretation>SNAPSHOT</aixm:interpretation>\n          <aixm:name>LIRR FIC</aixm:name>\n          <aixm:type>FIC</aixm:type>\n          <aixm:designator>LIRR</aixm:designator>\n        </aixm:UnitTimeSlice>\n      </aixm:timeSlice>\n    </aixm:Unit>\n  </iwxxm:issuingAirTrafficServicesUnit>\n  <iwxxm:originatingMeteorologicalWatchOffice>\n    <aixm:Unit gml:id="uuid.37a98667-49ba-365a-ae8d-ead3b3d687ed">\n      <aixm:timeSlice>\n        <aixm:UnitTimeSlice gml:id="uuid.e0847324-47a4-36b7-91e7-553ea432b416">\n          <gml:validTime/>\n          <aixm:interpretation>SNAPSHOT</aixm:interpretation>\n          <aixm:name>LIIB MWO</aixm:name>\n          <aixm:type>MWO</aixm:type>\n          <aixm:designator>LIIB</aixm:designator>\n        </aixm:UnitTimeSlice>\n      </aixm:timeSlice>\n    </aixm:Unit>\n  </iwxxm:originatingMeteorologicalWatchOffice>\n  <iwxxm:issuingAirTrafficServicesRegion>\n    <aixm:Airspace gml:id="uuid.258e8b98-70cd-32a7-a567-984c4eac1549">\n      <aixm:timeSlice>\n        <aixm:AirspaceTimeSlice gml:id="uuid.37bfdaf4-da0d-3cf9-999a-ae8f6eb8f753">\n          <gml:validTime/>\n          <aixm:interpretation>SNAPSHOT</aixm:interpretation>\n          <aixm:type>FIR</aixm:type>\n          <aixm:designator>LIRR</aixm:designator>\n          <aixm:name>ROMA FIR</aixm:name>\n        </aixm:AirspaceTimeSlice>\n      </aixm:timeSlice>\n    </aixm:Airspace>\n  </iwxxm:issuingAirTrafficServicesRegion>\n  <iwxxm:sequenceNumber>18</iwxxm:sequenceNumber>\n  <iwxxm:validPeriod>\n    <gml:TimePeriod gml:id="uuid.320ebce9-308c-37f2-9a7e-c0e2fb8b686a">\n      <gml:beginPosition>2020-09-15T18:00:00Z</gml:beginPosition>\n      <gml:endPosition>2020-09-15T22:00:00Z</gml:endPosition>\n    </gml:TimePeriod>\n  </iwxxm:validPeriod>\n  <iwxxm:phenomenon xlink:href="http://codes.wmo.int/49-2/AirWxPhenomena/MT_OBSC"/>\n  <iwxxm:analysis>\n    <iwxxm:AIRMETEvolvingConditionCollection gml:id="uuid.5300d31e-04e5-35d0-862d-16cc5a54b787" timeIndicator="FORECAST">\n      <iwxxm:phenomenonTime xlink:href="#uuid.320ebce9-308c-37f2-9a7e-c0e2fb8b686a"/>\n      <iwxxm:member>\n        <iwxxm:AIRMETEvolvingCondition gml:id="uuid.64073211-7c20-34b1-9b56-8f4ea3998924" intensityChange="NO_CHANGE">\n          <iwxxm:geometry>\n            <aixm:AirspaceVolume gml:id="uuid.886265dc-c233-3b76-ad8e-323ce1b47ea9">\n              <aixm:horizontalProjection>\n                <aixm:Surface gml:id="uuid.acdfa6fd-20f3-3ada-9859-175e6c68c60a" srsDimension="2" axisLabels="Lat Long" srsName="http://www.opengis.net/def/crs/EPSG/0/4326">\n                  <gml:polygonPatches>\n                    <gml:PolygonPatch>\n                      <gml:exterior>\n                        <gml:LinearRing>\n                          <gml:posList count="9">42.82 13.05 43.48 13.30 43.60 11.72 40.47 14.67 37.30 14.80 38.40 16.77 41.17 15.07 41.45 14.30 42.82 13.05</gml:posList>\n                        </gml:LinearRing>\n                      </gml:exterior>\n                    </gml:PolygonPatch>\n                  </gml:polygonPatches>\n                </aixm:Surface>\n              </aixm:horizontalProjection>\n            </aixm:AirspaceVolume>\n          </iwxxm:geometry>\n        </iwxxm:AIRMETEvolvingCondition>\n      </iwxxm:member>\n    </iwxxm:AIRMETEvolvingConditionCollection>\n  </iwxxm:analysis>\n</iwxxm:AIRMET>\n
'''  # noqa: E501

TAC_AIR_US = b'''\
\r\r\n
777 \r\r\n
WAAK47 PAWU 041658 AAA\r\r\n
WA7O  \r\r\n
JNUS WA 041656 AMD\r\r\n
AIRMET SIERRA FOR IFR AND MT OBSC VALID UNTIL 042015\r\r\n
.\r\r\n
LYNN CANAL AND GLACIER BAY JB UPDT\r\r\n
MTS OBSC IN CLDS/PCPN. IMPR.\r\r\n
.\r\r\n
CNTRL SE AK JC UPDT\r\r\n
MTS OBSC IN CLDS/PCPN. NC.\r\r\n
.\r\r\n
SRN SE AK JD\r\r\n
MTS OCNL OBSC IN CLDS/PCPN. NC.\r\r\n
.\r\r\n
ERN GLF CST JE\r\r\n
MTS OCNL OBSC IN CLDS/PCPN. NC.\r\r\n
.\r\r\n
SE AK CSTL WTRS JF\r\r\n
MTS OCNL OBSC IN CLDS/ISOL PCPN. NC.\r\r\n
.\r\r\n
=JNUT WA 041656\r\r\n
AIRMET TANGO FOR TURB/STG SFC WINDS VALID UNTIL 042015\r\r\n
.\r\r\n
SRN SE AK JD\r\r\n
AREAS OF LLWS. NC.\r\r\n
.\r\r\n
=JNUZ WA 041656\r\r\n
AIRMET ZULU FOR ICING VALID UNTIL 042015\r\r\n
.\r\r\n
ERN GLF CST JE\r\r\n
TIL 18Z ALG CST OCNL MOD ICEIC 030-070.\r\r\n
FZLVL 010. WKN.\r\r\n
.\r\r\n
JAM/BH APR 2019 AAWU\r\r\n
\r\r\n
'''

XML_AIR_US = b'''\
<?xml version="1.0" encoding="UTF-8"?>\n<iwxxm:AIRMET xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:aixm="http://www.aixm.aero/schema/5.1.1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:gml="http://www.opengis.net/gml/3.2" xmlns:iwxxm="http://icao.int/iwxxm/3.0" xmlns:iwxxm-us="http://www.weather.gov/iwxxm-us/3.0" xsi:schemaLocation="http://icao.int/iwxxm/3.0 http://schemas.wmo.int/iwxxm/3.0/iwxxm.xsd http://www.weather.gov/iwxxm-us/3.0 https://nws.weather.gov/schemas/iwxxm-us/3.0/iwxxm-us.xsd" gml:id="uuid.d5195a80-0b92-3925-9e84-c80b5fc2f2f8" reportStatus="AMENDMENT" permissibleUsage="OPERATIONAL" translatedBulletinID="WAAK47JNU041658" translatedBulletinReceptionTime="2020-10-05T13:55:02Z" translationTime="2020-10-05T13:55:02Z" translationCentreDesignator="" translationCentreName="">\n  <iwxxm:issueTime>\n    <gml:TimeInstant gml:id="uuid.9a4da251-8d76-3ccf-a1a4-b3cfd7534a05">\n      <gml:timePosition>2020-10-04T16:58:00Z</gml:timePosition>\n    </gml:TimeInstant>\n  </iwxxm:issueTime>\n  <iwxxm:issuingAirTrafficServicesUnit>\n    <aixm:Unit gml:id="uuid.5b5fe232-4461-3ce0-8767-0f6431091628">\n      <aixm:timeSlice>\n        <aixm:UnitTimeSlice gml:id="uuid.ba0221f1-df0b-32f0-90e1-0284394b08fe">\n          <gml:validTime/>\n          <aixm:interpretation>SNAPSHOT</aixm:interpretation>\n          <aixm:name>JNU FIC</aixm:name>\n          <aixm:type>FIC</aixm:type>\n          <aixm:designator>JNU</aixm:designator>\n        </aixm:UnitTimeSlice>\n      </aixm:timeSlice>\n    </aixm:Unit>\n  </iwxxm:issuingAirTrafficServicesUnit>\n  <iwxxm:originatingMeteorologicalWatchOffice>\n    <aixm:Unit gml:id="uuid.aeef0d8b-1219-359e-a073-27ccc3c34fd9">\n      <aixm:timeSlice>\n        <aixm:UnitTimeSlice gml:id="uuid.ac4d4fec-f04f-32e9-a8b9-7b9d9dbf8d8e">\n          <gml:validTime/>\n          <aixm:interpretation>SNAPSHOT</aixm:interpretation>\n          <aixm:name>PAWU MWO</aixm:name>\n          <aixm:type>MWO</aixm:type>\n          <aixm:designator>PAWU</aixm:designator>\n        </aixm:UnitTimeSlice>\n      </aixm:timeSlice>\n    </aixm:Unit>\n  </iwxxm:originatingMeteorologicalWatchOffice>\n  <iwxxm:issuingAirTrafficServicesRegion xlink:href="https://nws.weather.gov/schemas/iwxxm-us/Airspace/AOR-FA/AK"/>\n  <iwxxm:sequenceNumber nilReason="http://codes.wmo.int/common/nil/missing"/>\n  <iwxxm:validPeriod>\n    <gml:TimePeriod gml:id="uuid.509031d4-47d2-385a-9927-bcc52d26f138">\n      <gml:beginPosition>2020-10-04T16:56:00Z</gml:beginPosition>\n      <gml:endPosition>2020-10-04T20:15:00Z</gml:endPosition>\n    </gml:TimePeriod>\n  </iwxxm:validPeriod>\n  <iwxxm:phenomenon xlink:href="http://codes.wmo.int/49-2/AirWxPhenomena/MT_OBSC"/>\n  <iwxxm:analysis>\n    <iwxxm:AIRMETEvolvingConditionCollection gml:id="uuid.f6732e79-3054-3e4c-87a4-8b15e7088c33" timeIndicator="FORECAST">\n      <iwxxm:phenomenonTime xlink:href="#uuid.509031d4-47d2-385a-9927-bcc52d26f138"/>\n      <iwxxm:member>\n        <iwxxm:AIRMETEvolvingCondition gml:id="uuid.ac5c5452-a3d8-331c-95a0-188e3ff4d013" intensityChange="WEAKEN">\n          <iwxxm:geometry>\n            <aixm:AirspaceVolume gml:id="uuid.fa630d51-732e-36fb-88e6-2fc34f7741d9">\n              <aixm:horizontalProjection>\n                <aixm:Surface gml:id="uuid.a10cceae-e1de-3be8-a5b1-8ee4aeecc3b5" srsDimension="2" axisLabels="Lat Long" srsName="http://www.opengis.net/def/crs/EPSG/0/4326">\n                  <gml:polygonPatches>\n                    <gml:PolygonPatch>\n                      <gml:exterior>\n                        <gml:LinearRing>\n                          <gml:posList count="23">58.81 -137.95 58.13 -136.50 58.29 -135.78 58.19 -135.08 58.73 -133.84 58.75 -133.85 58.85 -134.23 59.13 -134.48 59.13 -134.57 59.23 -134.70 59.28 -134.97 59.42 -135.03 59.58 -135.02 59.82 -135.48 59.60 -136.33 59.55 -136.22 59.47 -136.33 59.47 -136.50 59.17 -136.58 59.17 -136.83 58.90 -137.50 58.90 -137.53 58.81 -137.95</gml:posList>\n                        </gml:LinearRing>\n                      </gml:exterior>\n                    </gml:PolygonPatch>\n                  </gml:polygonPatches>\n                </aixm:Surface>\n              </aixm:horizontalProjection>\n            </aixm:AirspaceVolume>\n          </iwxxm:geometry>\n          <iwxxm:extension>\n            <iwxxm-us:Remarks>\n              <iwxxm-us:freeText>UPDT. MTS OBSC IN CLDS/PCPN</iwxxm-us:freeText>\n            </iwxxm-us:Remarks>\n          </iwxxm:extension>\n        </iwxxm:AIRMETEvolvingCondition>\n      </iwxxm:member>\n      <iwxxm:member>\n        <iwxxm:AIRMETEvolvingCondition gml:id="uuid.25b2f4ec-3640-30d7-9ad6-f0e6092f0e91" intensityChange="NO_CHANGE">\n          <iwxxm:geometry>\n            <aixm:AirspaceVolume gml:id="uuid.0a1c9c8f-6b4a-303b-850d-6f79f076d6ab">\n              <aixm:horizontalProjection>\n                <aixm:Surface gml:id="uuid.65421e33-b9a7-3c5d-a5d4-f49897568e68" srsDimension="2" axisLabels="Lat Long" srsName="http://www.opengis.net/def/crs/EPSG/0/4326">\n                  <gml:polygonPatches>\n                    <gml:PolygonPatch>\n                      <gml:exterior>\n                        <gml:LinearRing>\n                          <gml:posList count="16">58.13 -136.50 56.00 -134.13 56.41 -133.31 56.60 -131.83 56.80 -131.87 56.88 -132.12 57.03 -132.03 57.10 -132.37 57.22 -132.23 58.38 -133.47 58.43 -133.37 58.75 -133.85 58.73 -133.84 58.19 -135.08 58.29 -135.78 58.13 -136.50</gml:posList>\n                        </gml:LinearRing>\n                      </gml:exterior>\n                    </gml:PolygonPatch>\n                  </gml:polygonPatches>\n                </aixm:Surface>\n              </aixm:horizontalProjection>\n            </aixm:AirspaceVolume>\n          </iwxxm:geometry>\n          <iwxxm:extension>\n            <iwxxm-us:Remarks>\n              <iwxxm-us:freeText>UPDT. MTS OBSC IN CLDS/PCPN</iwxxm-us:freeText>\n            </iwxxm-us:Remarks>\n          </iwxxm:extension>\n        </iwxxm:AIRMETEvolvingCondition>\n      </iwxxm:member>\n      <iwxxm:member>\n        <iwxxm:AIRMETEvolvingCondition gml:id="uuid.dfb109d8-1d40-339c-9734-53eebffbf3ca" intensityChange="NO_CHANGE">\n          <iwxxm:geometry>\n            <aixm:AirspaceVolume gml:id="uuid.b2a37d24-4880-3e58-8ab7-2630d61e90de">\n              <aixm:horizontalProjection>\n                <aixm:Surface gml:id="uuid.2e45397b-36a9-3165-ba36-8537b88972e2" srsDimension="2" axisLabels="Lat Long" srsName="http://www.opengis.net/def/crs/EPSG/0/4326">\n                  <gml:polygonPatches>\n                    <gml:PolygonPatch>\n                      <gml:exterior>\n                        <gml:LinearRing>\n                          <gml:posList count="19">56.00 -134.13 54.66 -132.69 54.74 -130.71 54.80 -130.52 55.00 -130.25 55.33 -130.02 55.68 -130.12 56.02 -130.07 56.12 -130.12 56.10 -130.25 56.15 -130.42 56.25 -130.47 56.27 -130.62 56.37 -130.80 56.42 -131.08 56.62 -131.58 56.60 -131.83 56.41 -133.31 56.00 -134.13</gml:posList>\n                        </gml:LinearRing>\n                      </gml:exterior>\n                    </gml:PolygonPatch>\n                  </gml:polygonPatches>\n                </aixm:Surface>\n              </aixm:horizontalProjection>\n            </aixm:AirspaceVolume>\n          </iwxxm:geometry>\n          <iwxxm:extension>\n            <iwxxm-us:Remarks>\n              <iwxxm-us:freeText>MTS OCNL OBSC IN CLDS/PCPN</iwxxm-us:freeText>\n            </iwxxm-us:Remarks>\n          </iwxxm:extension>\n        </iwxxm:AIRMETEvolvingCondition>\n      </iwxxm:member>\n      <iwxxm:member>\n        <iwxxm:AIRMETEvolvingCondition gml:id="uuid.28c038e2-4c32-3390-add2-9f6754c22417" intensityChange="NO_CHANGE">\n          <iwxxm:geometry>\n            <aixm:AirspaceVolume gml:id="uuid.f66d02d2-f71a-3a13-8ced-f2fb1574fc52">\n              <aixm:horizontalProjection>\n                <aixm:Surface gml:id="uuid.efc6434d-da43-35cb-b88b-587b9d7c7072" srsDimension="2" axisLabels="Lat Long" srsName="http://www.opengis.net/def/crs/EPSG/0/4326">\n                  <gml:polygonPatches>\n                    <gml:PolygonPatch>\n                      <gml:exterior>\n                        <gml:LinearRing>\n                          <gml:posList count="23">58.91 -137.53 58.90 -137.50 59.23 -137.60 59.78 -138.65 59.90 -138.70 60.08 -139.18 60.35 -139.05 60.33 -139.67 60.18 -139.98 60.30 -140.45 60.22 -140.53 60.30 -141.00 60.50 -142.30 60.52 -143.25 60.73 -143.46 60.66 -143.65 60.63 -143.90 59.99 -143.88 58.70 -144.00 58.60 -142.00 58.00 -140.00 58.81 -137.95 58.91 -137.53</gml:posList>\n                        </gml:LinearRing>\n                      </gml:exterior>\n                    </gml:PolygonPatch>\n                  </gml:polygonPatches>\n                </aixm:Surface>\n              </aixm:horizontalProjection>\n            </aixm:AirspaceVolume>\n          </iwxxm:geometry>\n          <iwxxm:extension>\n            <iwxxm-us:Remarks>\n              <iwxxm-us:freeText>MTS OCNL OBSC IN CLDS/PCPN</iwxxm-us:freeText>\n            </iwxxm-us:Remarks>\n          </iwxxm:extension>\n        </iwxxm:AIRMETEvolvingCondition>\n      </iwxxm:member>\n      <iwxxm:member>\n        <iwxxm:AIRMETEvolvingCondition gml:id="uuid.c9a9c379-4e7c-37f3-b039-da80b3bd99fe" intensityChange="NO_CHANGE">\n          <iwxxm:geometry>\n            <aixm:AirspaceVolume gml:id="uuid.c9083cf8-d7a4-3e7f-a239-9f0909ae0c0b">\n              <aixm:horizontalProjection>\n                <aixm:Surface gml:id="uuid.692ae9e8-419c-3a8e-9d34-2c1b333f8da0" srsDimension="2" axisLabels="Lat Long" srsName="http://www.opengis.net/def/crs/EPSG/0/4326">\n                  <gml:polygonPatches>\n                    <gml:PolygonPatch>\n                      <gml:exterior>\n                        <gml:LinearRing>\n                          <gml:posList count="8">54.66 -132.69 56.00 -134.13 58.13 -136.50 58.81 -137.95 58.00 -140.00 56.00 -137.00 54.10 -135.30 54.66 -132.69</gml:posList>\n                        </gml:LinearRing>\n                      </gml:exterior>\n                    </gml:PolygonPatch>\n                  </gml:polygonPatches>\n                </aixm:Surface>\n              </aixm:horizontalProjection>\n            </aixm:AirspaceVolume>\n          </iwxxm:geometry>\n          <iwxxm:extension>\n            <iwxxm-us:Remarks>\n              <iwxxm-us:freeText>MTS OCNL OBSC IN CLDS/ISOL PCPN</iwxxm-us:freeText>\n            </iwxxm-us:Remarks>\n          </iwxxm:extension>\n        </iwxxm:AIRMETEvolvingCondition>\n      </iwxxm:member>\n      <iwxxm:member>\n        <iwxxm:AIRMETEvolvingCondition gml:id="uuid.8de82b81-777a-3d27-9b24-73a6c480ee40">\n          <iwxxm:extension>\n            <iwxxm-us:Remarks>\n              <iwxxm-us:freeText>=JNUT WA 041656 AIRMET TANGO FOR TURB/STG SFC WINDS VALID UNTIL 042015</iwxxm-us:freeText>\n            </iwxxm-us:Remarks>\n          </iwxxm:extension>\n        </iwxxm:AIRMETEvolvingCondition>\n      </iwxxm:member>\n      <iwxxm:member>\n        <iwxxm:AIRMETEvolvingCondition gml:id="uuid.24f6aeb1-b82c-3c2c-8995-a8dadb61c887" intensityChange="NO_CHANGE">\n          <iwxxm:geometry>\n            <aixm:AirspaceVolume gml:id="uuid.35308985-2820-3987-9903-c730708a43bf">\n              <aixm:horizontalProjection>\n                <aixm:Surface gml:id="uuid.6b320ba6-8f93-3bd4-84ae-b63ebf5b8ac3" srsDimension="2" axisLabels="Lat Long" srsName="http://www.opengis.net/def/crs/EPSG/0/4326">\n                  <gml:polygonPatches>\n                    <gml:PolygonPatch>\n                      <gml:exterior>\n                        <gml:LinearRing>\n                          <gml:posList count="19">56.00 -134.13 54.66 -132.69 54.74 -130.71 54.80 -130.52 55.00 -130.25 55.33 -130.02 55.68 -130.12 56.02 -130.07 56.12 -130.12 56.10 -130.25 56.15 -130.42 56.25 -130.47 56.27 -130.62 56.37 -130.80 56.42 -131.08 56.62 -131.58 56.60 -131.83 56.41 -133.31 56.00 -134.13</gml:posList>\n                        </gml:LinearRing>\n                      </gml:exterior>\n                    </gml:PolygonPatch>\n                  </gml:polygonPatches>\n                </aixm:Surface>\n              </aixm:horizontalProjection>\n            </aixm:AirspaceVolume>\n          </iwxxm:geometry>\n          <iwxxm:extension>\n            <iwxxm-us:Remarks>\n              <iwxxm-us:freeText>AREAS OF LLWS</iwxxm-us:freeText>\n            </iwxxm-us:Remarks>\n          </iwxxm:extension>\n        </iwxxm:AIRMETEvolvingCondition>\n      </iwxxm:member>\n      <iwxxm:member>\n        <iwxxm:AIRMETEvolvingCondition gml:id="uuid.fabbaeec-ceb9-3ab0-b0b2-0c58053d7a8e">\n          <iwxxm:extension>\n            <iwxxm-us:Remarks>\n              <iwxxm-us:freeText>=JNUZ WA 041656 AIRMET ZULU FOR ICING VALID UNTIL 042015</iwxxm-us:freeText>\n            </iwxxm-us:Remarks>\n          </iwxxm:extension>\n        </iwxxm:AIRMETEvolvingCondition>\n      </iwxxm:member>\n      <iwxxm:member>\n        <iwxxm:AIRMETEvolvingCondition gml:id="uuid.c6bd122e-9f01-3e67-aae9-3da7ce6fcd56" intensityChange="WEAKEN">\n          <iwxxm:geometry>\n            <aixm:AirspaceVolume gml:id="uuid.bf974e63-5e1e-3336-933e-e1f8e65f3fc6">\n              <aixm:horizontalProjection>\n                <aixm:Surface gml:id="uuid.c679150d-0c1f-3408-bf11-d03b8b64b3c5" srsDimension="2" axisLabels="Lat Long" srsName="http://www.opengis.net/def/crs/EPSG/0/4326">\n                  <gml:polygonPatches>\n                    <gml:PolygonPatch>\n                      <gml:exterior>\n                        <gml:LinearRing>\n                          <gml:posList count="23">58.91 -137.53 58.90 -137.50 59.23 -137.60 59.78 -138.65 59.90 -138.70 60.08 -139.18 60.35 -139.05 60.33 -139.67 60.18 -139.98 60.30 -140.45 60.22 -140.53 60.30 -141.00 60.50 -142.30 60.52 -143.25 60.73 -143.46 60.66 -143.65 60.63 -143.90 59.99 -143.88 58.70 -144.00 58.60 -142.00 58.00 -140.00 58.81 -137.95 58.91 -137.53</gml:posList>\n                        </gml:LinearRing>\n                      </gml:exterior>\n                    </gml:PolygonPatch>\n                  </gml:polygonPatches>\n                </aixm:Surface>\n              </aixm:horizontalProjection>\n            </aixm:AirspaceVolume>\n          </iwxxm:geometry>\n          <iwxxm:extension>\n            <iwxxm-us:AIRMETEvolvingConditionExtension>\n              <iwxxm-us:validTimeSubPeriod>\n                <gml:TimePeriod gml:id="uuid.4e58e7cb-d166-33d0-8a39-0ab9ef3ea4f0">\n                  <gml:beginPosition>2020-10-04T16:56:00Z</gml:beginPosition>\n                  <gml:endPosition>2020-10-04T18:00:00Z</gml:endPosition>\n                </gml:TimePeriod>\n              </iwxxm-us:validTimeSubPeriod>\n              <iwxxm-us:freezingLevel>\n                <iwxxm-us:flightLevel gml:id="uuid.9cce79a0-4dd8-35f1-bdee-907f7b7aeece">\n                  <aixm:lowerLimit uom="FT">1000</aixm:lowerLimit>\n                  <aixm:lowerLimitReference>MSL</aixm:lowerLimitReference>\n                </iwxxm-us:flightLevel>\n                <iwxxm-us:multipleLevels>false</iwxxm-us:multipleLevels>\n              </iwxxm-us:freezingLevel>\n            </iwxxm-us:AIRMETEvolvingConditionExtension>\n          </iwxxm:extension>\n          <iwxxm:extension>\n            <iwxxm-us:Remarks>\n              <iwxxm-us:freeText>ALG CST OCNL MOD ICEIC 030-070</iwxxm-us:freeText>\n            </iwxxm-us:Remarks>\n          </iwxxm:extension>\n        </iwxxm:AIRMETEvolvingCondition>\n      </iwxxm:member>\n      <iwxxm:member>\n        <iwxxm:AIRMETEvolvingCondition gml:id="uuid.48ba01d1-556c-344a-be13-f4f1e7918e1c">\n          <iwxxm:extension>\n            <iwxxm-us:Remarks>\n              <iwxxm-us:freeText>JAM/BH APR 2019 AAWU</iwxxm-us:freeText>\n            </iwxxm-us:Remarks>\n          </iwxxm:extension>\n        </iwxxm:AIRMETEvolvingCondition>\n      </iwxxm:member>\n    </iwxxm:AIRMETEvolvingConditionCollection>\n  </iwxxm:analysis>\n</iwxxm:AIRMET>\n
'''  # noqa: E501

XML_SIG_US = b'''\
<?xml version="1.0" encoding="UTF-8"?>\n<iwxxm:SIGMET xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:aixm="http://www.aixm.aero/schema/5.1.1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:gml="http://www.opengis.net/gml/3.2" xmlns:iwxxm="http://icao.int/iwxxm/3.0" xmlns:iwxxm-us="http://www.weather.gov/iwxxm-us/3.0" xsi:schemaLocation="http://icao.int/iwxxm/3.0 http://schemas.wmo.int/iwxxm/3.0/iwxxm.xsd http://www.weather.gov/iwxxm-us/3.0 https://nws.weather.gov/schemas/iwxxm-us/3.0/iwxxm-us.xsd" gml:id="uuid.53c10d9d-df99-39d6-80d5-f8f6b4a16ca6" reportStatus="NORMAL" permissibleUsage="OPERATIONAL" translatedBulletinID="WSUS31MKCE101455" translatedBulletinReceptionTime="2020-09-09T11:15:32Z" translationTime="2020-09-09T11:15:32Z" translationCentreDesignator="" translationCentreName="">\n  <iwxxm:issueTime>\n    <gml:TimeInstant gml:id="uuid.643a8189-9832-335d-9ca5-6ef3c46d1f9d">\n      <gml:timePosition>2020-09-10T14:55:00Z</gml:timePosition>\n    </gml:TimeInstant>\n  </iwxxm:issueTime>\n  <iwxxm:issuingAirTrafficServicesUnit>\n    <aixm:Unit gml:id="uuid.5f7e3c69-79ef-384c-b2b9-8397c41dddfa">\n      <aixm:timeSlice>\n        <aixm:UnitTimeSlice gml:id="uuid.384c3b01-9f5a-3527-8580-b64bb48281b2">\n          <gml:validTime/>\n          <aixm:interpretation>SNAPSHOT</aixm:interpretation>\n          <aixm:name>MKCE FIC</aixm:name>\n          <aixm:type>FIC</aixm:type>\n          <aixm:designator>MKCE</aixm:designator>\n        </aixm:UnitTimeSlice>\n      </aixm:timeSlice>\n    </aixm:Unit>\n  </iwxxm:issuingAirTrafficServicesUnit>\n  <iwxxm:originatingMeteorologicalWatchOffice>\n    <aixm:Unit gml:id="uuid.a902e336-84db-3702-bbf8-39e499949719">\n      <aixm:timeSlice>\n        <aixm:UnitTimeSlice gml:id="uuid.840455fe-f9ff-3210-a437-58db44d2a2cf">\n          <gml:validTime/>\n          <aixm:interpretation>SNAPSHOT</aixm:interpretation>\n          <aixm:name>KKCI MWO</aixm:name>\n          <aixm:type>MWO</aixm:type>\n          <aixm:designator>KKCI</aixm:designator>\n        </aixm:UnitTimeSlice>\n      </aixm:timeSlice>\n    </aixm:Unit>\n  </iwxxm:originatingMeteorologicalWatchOffice>\n  <iwxxm:issuingAirTrafficServicesRegion xlink:href="https://nws.weather.gov/schemas/iwxxm-us/Airspace/SECTORS/EAST"/>\n  <iwxxm:sequenceNumber nilReason="http://codes.wmo.int/common/nil/missing"/>\n  <iwxxm:validPeriod>\n    <gml:TimePeriod gml:id="uuid.ea83053d-5976-3c08-97f9-8136896a283a">\n      <gml:beginPosition>2020-09-10T14:55:00Z</gml:beginPosition>\n      <gml:endPosition>2020-09-10T20:55:00Z</gml:endPosition>\n    </gml:TimePeriod>\n  </iwxxm:validPeriod>\n  <iwxxm:phenomenon nilReason="http://codes.wmo.int/common/nil/template"/>\n  <iwxxm:analysis>\n    <iwxxm:SIGMETEvolvingConditionCollection gml:id="uuid.a8dbf13b-acde-3a04-acc4-06b8d42e52e7" timeIndicator="FORECAST">\n      <iwxxm:phenomenonTime>\n        <gml:TimePeriod gml:id="uuid.a33cf573-b860-30ce-9eb9-4de7b81f6cd5">\n          <gml:beginPosition>2020-09-10T14:55:00Z</gml:beginPosition>\n          <gml:endPosition>2020-09-10T16:55:00Z</gml:endPosition>\n        </gml:TimePeriod>\n      </iwxxm:phenomenonTime>\n      <iwxxm:member>\n        <iwxxm:SIGMETEvolvingCondition gml:id="uuid.c2ca31d9-4b86-35ea-be2a-2f35333e947f">\n          <iwxxm:geometry>\n            <aixm:AirspaceVolume gml:id="uuid.5e17aed0-77b5-32fb-b8f7-b0d4482a4243">\n              <aixm:upperLimit uom="FL">450</aixm:upperLimit>\n              <aixm:upperLimitReference>STD</aixm:upperLimitReference>\n              <aixm:horizontalProjection>\n                <aixm:Surface gml:id="uuid.a36a072b-88e6-3de5-9440-85e6f77c89d9" srsDimension="2" axisLabels="Lat Long" srsName="http://www.opengis.net/def/crs/EPSG/0/4326">\n                  <gml:polygonPatches>\n                    <gml:PolygonPatch>\n                      <gml:exterior>\n                        <gml:LinearRing>\n                          <gml:posList count="5">26.67 -78.79 26.22 -83.86 24.01 -83.31 23.90 -78.24 26.67 -78.79</gml:posList>\n                        </gml:LinearRing>\n                      </gml:exterior>\n                    </gml:PolygonPatch>\n                  </gml:polygonPatches>\n                </aixm:Surface>\n              </aixm:horizontalProjection>\n              <aixm:extension>\n                <iwxxm-us:AffectedStates gml:id="uuid.863620df-990c-3c6b-b96a-d754119c2873">\n                  <iwxxm-us:stateIDs>FL</iwxxm-us:stateIDs>\n                </iwxxm-us:AffectedStates>\n              </aixm:extension>\n            </aixm:AirspaceVolume>\n          </iwxxm:geometry>\n          <iwxxm:directionOfMotion uom="deg">0</iwxxm:directionOfMotion>\n          <iwxxm:speedOfMotion uom="[kn_i]">5</iwxxm:speedOfMotion>\n          <iwxxm:extension>\n            <iwxxm-us:SIGMETWeatherHazards tag="36E" isSevere="true">\n              <iwxxm-us:weatherPhenomenon xlink:href="https://codes.nws.noaa.gov/NWSI-10-811/SIGMETWeatherPhenomena/AreaSvrEmbeddedTS"/>\n              <iwxxm-us:maxWindGusts uom="[kn_i]">115</iwxxm-us:maxWindGusts>\n              <iwxxm-us:tornadicPhenomena>EXPECTED</iwxxm-us:tornadicPhenomena>\n            </iwxxm-us:SIGMETWeatherHazards>\n          </iwxxm:extension>\n        </iwxxm:SIGMETEvolvingCondition>\n      </iwxxm:member>\n    </iwxxm:SIGMETEvolvingConditionCollection>\n  </iwxxm:analysis>\n</iwxxm:SIGMET>\n
'''  # noqa: E501

XML_SIG_US_NO_HEADER = b'''\
<?xml version="1.0" encoding="UTF-8"?>\n<iwxxm:SIGMET xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:aixm="http://www.aixm.aero/schema/5.1.1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:gml="http://www.opengis.net/gml/3.2" xmlns:iwxxm="http://icao.int/iwxxm/3.0" xsi:schemaLocation="http://icao.int/iwxxm/3.0 http://schemas.wmo.int/iwxxm/3.0/iwxxm.xsd" gml:id="uuid.210b1114-291a-34de-aa47-248acf0ce5c1" reportStatus="NORMAL" permissibleUsage="OPERATIONAL" translatedBulletinID="WSCN02CZEG231739" translatedBulletinReceptionTime="2020-09-09T11:15:32Z" translationTime="2020-09-09T11:15:32Z">\n  <iwxxm:issueTime>\n    <gml:TimeInstant gml:id="uuid.0150ba9a-b933-3000-bd59-babdceb405ba">\n      <gml:timePosition>2020-09-23T17:39:00Z</gml:timePosition>\n    </gml:TimeInstant>\n  </iwxxm:issueTime>\n  <iwxxm:issuingAirTrafficServicesUnit>\n    <aixm:Unit gml:id="uuid.067e662b-7289-3aa8-80d3-b55351578804">\n      <aixm:timeSlice>\n        <aixm:UnitTimeSlice gml:id="uuid.8f2f3c86-d9ff-37f8-ba9d-6a53979129ca">\n          <gml:validTime/>\n          <aixm:interpretation>SNAPSHOT</aixm:interpretation>\n          <aixm:name>CZEG FIC</aixm:name>\n          <aixm:type>FIC</aixm:type>\n          <aixm:designator>CZEG</aixm:designator>\n        </aixm:UnitTimeSlice>\n      </aixm:timeSlice>\n    </aixm:Unit>\n  </iwxxm:issuingAirTrafficServicesUnit>\n  <iwxxm:originatingMeteorologicalWatchOffice>\n    <aixm:Unit gml:id="uuid.c8598113-7627-3091-b665-6c785951681a">\n      <aixm:timeSlice>\n        <aixm:UnitTimeSlice gml:id="uuid.9eab10db-6a1b-364f-ae02-5c91b13ad717">\n          <gml:validTime/>\n          <aixm:interpretation>SNAPSHOT</aixm:interpretation>\n          <aixm:name>CWEG MWO</aixm:name>\n          <aixm:type>MWO</aixm:type>\n          <aixm:designator>CWEG</aixm:designator>\n        </aixm:UnitTimeSlice>\n      </aixm:timeSlice>\n    </aixm:Unit>\n  </iwxxm:originatingMeteorologicalWatchOffice>\n  <iwxxm:issuingAirTrafficServicesRegion>\n    <aixm:Airspace gml:id="uuid.5a995819-29a2-3948-aa61-a14a0739d7b8">\n      <aixm:timeSlice>\n        <aixm:AirspaceTimeSlice gml:id="uuid.c4fb33d0-125e-331a-a8d7-e8bb8a431770">\n          <gml:validTime/>\n          <aixm:interpretation>SNAPSHOT</aixm:interpretation>\n          <aixm:type>FIR</aixm:type>\n          <aixm:designator>CZEG</aixm:designator>\n          <aixm:name>EDMONTON FIR</aixm:name>\n        </aixm:AirspaceTimeSlice>\n      </aixm:timeSlice>\n    </aixm:Airspace>\n  </iwxxm:issuingAirTrafficServicesRegion>\n  <iwxxm:sequenceNumber>A4</iwxxm:sequenceNumber>\n  <iwxxm:validPeriod>\n    <gml:TimePeriod gml:id="uuid.148f6a41-0ed3-3f99-ab7a-9d42f17de541">\n      <gml:beginPosition>2020-09-23T17:35:00Z</gml:beginPosition>\n      <gml:endPosition>2020-09-23T21:35:00Z</gml:endPosition>\n    </gml:TimePeriod>\n  </iwxxm:validPeriod>\n  <iwxxm:phenomenon xlink:href="http://codes.wmo.int/49-2/SigWxPhenomena/SEV_ICE_FZRA"/>\n  <iwxxm:analysis>\n    <iwxxm:SIGMETEvolvingConditionCollection gml:id="uuid.59931e82-1fb1-3c50-ad0f-e29d2d2560bd" timeIndicator="FORECAST">\n      <iwxxm:phenomenonTime xlink:href="#uuid.148f6a41-0ed3-3f99-ab7a-9d42f17de541"/>\n      <iwxxm:member>\n        <iwxxm:SIGMETEvolvingCondition gml:id="uuid.26503763-2a09-36c8-93a7-78e1c13dbc87" intensityChange="NO_CHANGE">\n          <iwxxm:geometry>\n            <aixm:AirspaceVolume gml:id="uuid.b28ffea9-c68d-33df-8929-5fb88691be11">\n              <aixm:upperLimit uom="FT">2000</aixm:upperLimit>\n              <aixm:upperLimitReference>MSL</aixm:upperLimitReference>\n              <aixm:horizontalProjection>\n                <aixm:Surface gml:id="uuid.eb59012a-f67b-35b7-b873-26e4d4e3279a" srsDimension="2" axisLabels="Lat Long" srsName="http://www.opengis.net/def/crs/EPSG/0/4326">\n                  <gml:polygonPatches>\n                    <gml:PolygonPatch>\n                      <gml:exterior>\n                        <gml:LinearRing>\n                          <gml:posList count="5">65.92 -104.17 64.94 -104.53 64.00 -94.97 64.96 -94.28 65.92 -104.17</gml:posList>\n                        </gml:LinearRing>\n                      </gml:exterior>\n                    </gml:PolygonPatch>\n                  </gml:polygonPatches>\n                </aixm:Surface>\n              </aixm:horizontalProjection>\n            </aixm:AirspaceVolume>\n          </iwxxm:geometry>\n          <iwxxm:directionOfMotion uom="deg">112.5</iwxxm:directionOfMotion>\n          <iwxxm:speedOfMotion uom="[kn_i]">15</iwxxm:speedOfMotion>\n        </iwxxm:SIGMETEvolvingCondition>\n      </iwxxm:member>\n    </iwxxm:SIGMETEvolvingConditionCollection>\n  </iwxxm:analysis>\n</iwxxm:SIGMET>
'''  # noqa: E501

# ~/airsigmet-converter_code_v3.0/test/xmlTestingDir/inputData/2016031610_WSNT04_KKCI_oceanic_ts.txt
TAC_SIG_INTL = b'''\
\r\r\n
330\r\r\n
WSNT04 KKCI 161010\r\r\n
SIGA0D\r\r\n
KZNY SIGMET DELTA 9 VALID 161010/161410 KKCI-\r\r\n
NEW YORK OCEANIC FIR FRQ TS OBS AT 1010Z WI N3500 W06600 - N3500\r\r\n
W05915 - N3100 W05630 - N2815 W06200 - N3500 W06600. TOP FL400.\r\r\n
MOV E 30KT. WKN.\r\r\n
\r\r\n
'''  # noqa: E501

XML_SIG_INTL = b'''\
<?xml version="1.0" encoding="UTF-8"?>\n<iwxxm:SIGMET xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:aixm="http://www.aixm.aero/schema/5.1.1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:gml="http://www.opengis.net/gml/3.2" xmlns:iwxxm="http://icao.int/iwxxm/3.0" xsi:schemaLocation="http://icao.int/iwxxm/3.0 http://schemas.wmo.int/iwxxm/3.0/iwxxm.xsd" gml:id="uuid.5c1b1d9c-5061-3df7-8145-7c70eeed7d23" reportStatus="NORMAL" permissibleUsage="OPERATIONAL" translatedBulletinID="WSNT04KZNY161010" translatedBulletinReceptionTime="2020-09-11T15:09:21Z" translationTime="2020-09-11T15:09:21Z">\n  <iwxxm:issueTime>\n    <gml:TimeInstant gml:id="uuid.0dc61d9b-50b0-38d1-b38b-b57e964b3658">\n      <gml:timePosition>2020-09-16T10:10:00Z</gml:timePosition>\n    </gml:TimeInstant>\n  </iwxxm:issueTime>\n  <iwxxm:issuingAirTrafficServicesUnit>\n    <aixm:Unit gml:id="uuid.dfc68d25-737f-3301-abd2-f3eea88ef5db">\n      <aixm:timeSlice>\n        <aixm:UnitTimeSlice gml:id="uuid.a9379832-4410-3ccb-80e8-3616289ba06b">\n          <gml:validTime/>\n          <aixm:interpretation>SNAPSHOT</aixm:interpretation>\n          <aixm:name>KZNY FIC</aixm:name>\n          <aixm:type>FIC</aixm:type>\n          <aixm:designator>KZNY</aixm:designator>\n        </aixm:UnitTimeSlice>\n      </aixm:timeSlice>\n    </aixm:Unit>\n  </iwxxm:issuingAirTrafficServicesUnit>\n  <iwxxm:originatingMeteorologicalWatchOffice>\n    <aixm:Unit gml:id="uuid.a902e336-84db-3702-bbf8-39e499949719">\n      <aixm:timeSlice>\n        <aixm:UnitTimeSlice gml:id="uuid.840455fe-f9ff-3210-a437-58db44d2a2cf">\n          <gml:validTime/>\n          <aixm:interpretation>SNAPSHOT</aixm:interpretation>\n          <aixm:name>KKCI MWO</aixm:name>\n          <aixm:type>MWO</aixm:type>\n          <aixm:designator>KKCI</aixm:designator>\n        </aixm:UnitTimeSlice>\n      </aixm:timeSlice>\n    </aixm:Unit>\n  </iwxxm:originatingMeteorologicalWatchOffice>\n  <iwxxm:issuingAirTrafficServicesRegion>\n    <aixm:Airspace gml:id="uuid.88bdfa9c-69b4-32f2-8c8d-065c9fa0a42d">\n      <aixm:timeSlice>\n        <aixm:AirspaceTimeSlice gml:id="uuid.03f0c1d7-32d5-3de8-81ac-046af5ddc34f">\n          <gml:validTime/>\n          <aixm:interpretation>SNAPSHOT</aixm:interpretation>\n          <aixm:type>FIR</aixm:type>\n          <aixm:designator>KZNY</aixm:designator>\n          <aixm:name>NEW YORK OCEANIC FIR</aixm:name>\n        </aixm:AirspaceTimeSlice>\n      </aixm:timeSlice>\n    </aixm:Airspace>\n  </iwxxm:issuingAirTrafficServicesRegion>\n  <iwxxm:sequenceNumber>DELTA 9</iwxxm:sequenceNumber>\n  <iwxxm:validPeriod>\n    <gml:TimePeriod gml:id="uuid.fa2fde9d-4e56-30c3-b83d-67a84288bb90">\n      <gml:beginPosition>2020-09-16T10:10:00Z</gml:beginPosition>\n      <gml:endPosition>2020-09-16T14:10:00Z</gml:endPosition>\n    </gml:TimePeriod>\n  </iwxxm:validPeriod>\n  <iwxxm:phenomenon xlink:href="http://codes.wmo.int/49-2/SigWxPhenomena/FRQ_TS"/>\n  <iwxxm:analysis>\n    <iwxxm:SIGMETEvolvingConditionCollection gml:id="uuid.7811092e-1f31-3f2d-bf8b-3a5f7aa60705" timeIndicator="OBSERVATION">\n      <iwxxm:phenomenonTime xlink:href="#uuid.0dc61d9b-50b0-38d1-b38b-b57e964b3658"/>\n      <iwxxm:member>\n        <iwxxm:SIGMETEvolvingCondition gml:id="uuid.50e9f1ac-5844-3ee6-9f20-b5df8e79eefb" intensityChange="WEAKEN">\n          <iwxxm:geometry>\n            <aixm:AirspaceVolume gml:id="uuid.f53976a4-3974-3f09-a758-8faa9ccb5ae0">\n              <aixm:upperLimit uom="FL">400</aixm:upperLimit>\n              <aixm:upperLimitReference>STD</aixm:upperLimitReference>\n              <aixm:horizontalProjection>\n                <aixm:Surface gml:id="uuid.9d8a10a9-d688-358d-bd42-97f8691c26f4" srsDimension="2" axisLabels="Lat Long" srsName="http://www.opengis.net/def/crs/EPSG/0/4326">\n                  <gml:polygonPatches>\n                    <gml:PolygonPatch>\n                      <gml:exterior>\n                        <gml:LinearRing>\n                          <gml:posList count="5">35.00 -66.00 28.25 -62.00 31.00 -56.50 35.00 -59.25 35.00 -66.00</gml:posList>\n                        </gml:LinearRing>\n                      </gml:exterior>\n                    </gml:PolygonPatch>\n                  </gml:polygonPatches>\n                </aixm:Surface>\n              </aixm:horizontalProjection>\n            </aixm:AirspaceVolume>\n          </iwxxm:geometry>\n          <iwxxm:directionOfMotion uom="deg">90</iwxxm:directionOfMotion>\n          <iwxxm:speedOfMotion uom="[kn_i]">30</iwxxm:speedOfMotion>\n        </iwxxm:SIGMETEvolvingCondition>\n      </iwxxm:member>\n    </iwxxm:SIGMETEvolvingConditionCollection>\n  </iwxxm:analysis>\n</iwxxm:SIGMET>\n
'''  # noqa: E501
