from app.extractors import SelExtractor
import pytest


class TestSelExtractor:

    @pytest.fixture
    def extractor(self):
        return SelExtractor()

    @pytest.mark.asyncio
    async def test_extract_uswx10(self, extractor):
        assert await extractor.extract(USWX10) == {}


USWX10 = b'''\
<uswx:PublicWatchNotification gml:id="sel-9ae2ed71-028d-4948-8f5d-35655427322f" isBackupCenter="false" isParticularlyDangerousSituation="false" publicWatchNotificationState="New" watchNumber="368" xmlns:gml="http://www.opengis.net/gml/3.2" xmlns:om="http://www.opengis.net/om/2.0" xmlns:uswx="http://nws.weather.gov/schemas/USWX/1.0" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://nws.weather.gov/schemas/USWX/1.0 http://nws.weather.gov/schemas/USWX/1.0/SEL/schema/spcPublicWatch.xsd"><uswx:issuingCenter>NWS Storm Prediction Center Norman OK</uswx:issuingCenter><uswx:awnID>awn-80c576c8-2ab5-46c7-8b9a-9234ec82788a</uswx:awnID><uswx:publicWatchMessage gml:id="sel-59da625b-1ff3-4c80-8e54-d6febbad3f1b"><om:type xlink:href="http://nws.weather.gov/codes/NWSI10-512/2013/Severe Thunderstorm Watch"/><om:phenomenonTime><gml:TimePeriod gml:id="sel-787bead7-14b2-4d15-88d3-df2c8d49a451"><gml:beginPosition>2020-07-14T02:20:00Z</gml:beginPosition><gml:endPosition>2020-07-14T08:00:00Z</gml:endPosition></gml:TimePeriod></om:phenomenonTime><om:resultTime><gml:TimeInstant gml:id="sel-6c42dc8e-4c1c-4c0e-bc7d-6d4a70f9a9cd"><gml:timePosition>2020-07-14T02:16:00Z</gml:timePosition></gml:TimeInstant></om:resultTime><om:validTime xlink:href="#sel-787bead7-14b2-4d15-88d3-df2c8d49a451"/><om:procedure xlink:href="http://www.nws.noaa.gov/directives/sym/pd01005012cur.pdf"/><om:observedProperty xlink:href="http://nws.weather.gov/codes/SevereWeatherPhenomena/Severe Thunderstorm"/><om:featureOfInterest><gml:DynamicFeature gml:id="sel-fc45d05e-9295-4b27-ba5a-175f30a71787"><gml:location><gml:Polygon axisLabels="latitude longitude" gml:id="sel-48a4a72f-13f0-4780-aeeb-b96671869fe3" srsDimension="2" srsName="urn:ogc:def:crs:EPSG::4326" uomLabels="deg deg"><gml:exterior><gml:LinearRing><gml:posList count="5">41.69 -96.99 39.59 -97.84 39.59 -100.10 41.69 -99.32 41.69 -96.99</gml:posList></gml:LinearRing></gml:exterior></gml:Polygon></gml:location></gml:DynamicFeature></om:featureOfInterest><om:result><uswx:WatchText><uswx:aviationThreat>NONE.</uswx:aviationThreat><uswx:callToAction>PRECAUTIONARY/PREPAREDNESS ACTIONS... REMEMBER...A Severe Thunderstorm Watch means conditions are favorable for severe thunderstorms in and close to the watch area. Persons in these areas should be on the lookout for threatening weather conditions and listen for later statements and possible warnings. Severe thunderstorms can and occasionally do produce tornadoes.</uswx:callToAction><uswx:threatText>The NWS Storm Prediction Center has issued a * Severe Thunderstorm Watch for portions of  North Central Kansas Central Nebraska * Effective this Monday night and Tuesday morning from 920 PM until 300 AM CDT. * Primary threats include... Widespread damaging winds and isolated significant gusts to 80 mph likely Scattered large hail and isolated very large hail events to 2 inches in diameter possible SUMMARY...A fast-moving bow echo over southwest Nebraska is expected to track across the watch area during the next few hours, posing a risk of damaging winds and some hail. The severe thunderstorm watch area is approximately along and 60 statute miles east and west of a line from 45 miles west northwest of Columbus NE to 75 miles south southwest of Hastings NE. For a complete depiction of the watch see the associated watch outline update (WOUS64 KWNS WOU8).</uswx:threatText></uswx:WatchText></om:result></uswx:publicWatchMessage></uswx:PublicWatchNotification>
'''  # noqa: E501
